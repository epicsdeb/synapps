# Note, we send the first command (1Ma, 2Ma, etc.) twice because the Pelco CM6700 seems
# to ignore the first command in a string if the remote keyboard is not plugged in.
# It responds with NAa to the first command in this case.
# If the remote keyboard is plugged it the first command is recognized.

record(mbbo,"$(P)$(R)Mon1") {
    field(DESC,"Monitor 1")
    field(ZRVL,"1")
    field(ZRST,"Camera 1")
    field(ONVL,"2")
    field(ONST,"Camera 2")
    field(TWVL,"3")
    field(TWST,"Camera 3")
    field(THVL,"4")
    field(THST,"Camera 4")
    field(FRVL,"5")
    field(FRST,"Camera 5")
    field(FVVL,"6")
    field(FVST,"Camera 6")
    field(SXVL,"7")
    field(SXST,"Camera 7")
    field(SVVL,"8")
    field(SVST,"Camera 8")
    field(EIVL,"9")
    field(EIST,"Camera 9")
    field(NIVL,"10")
    field(NIST,"Camera 10")
    field(TEVL,"11")
    field(TEST,"Camera 11")
    field(ELVL,"12")
    field(ELST,"Camera 12")
    field(TVVL,"13")
    field(TVST,"Camera 13")
    field(TTVL,"14")
    field(TTST,"Camera 14")
    field(FTVL,"15")
    field(FTST,"Camera 15")
    field(FFVL,"16")
    field(FFST,"Camera 16")
    field(FLNK,"$(P)$(R)Format1")
}

record(scalcout,"$(P)$(R)Format1") {
    field(INPA,"$(P)$(R)Mon1.RVAL NPP NMS")
    field(CALC,"$P('1Ma1Ma%d#a',A)")
    field(OUT,"$(P)$(R)Serial.AOUT PP MS")
}

record(mbbo,"$(P)$(R)Mon2") {
    field(DESC,"Monitor 2")
    field(ZRVL,"1")
    field(ZRST,"Camera 1")
    field(ONVL,"2")
    field(ONST,"Camera 2")
    field(TWVL,"3")
    field(TWST,"Camera 3")
    field(THVL,"4")
    field(THST,"Camera 4")
    field(FRVL,"5")
    field(FRST,"Camera 5")
    field(FVVL,"6")
    field(FVST,"Camera 6")
    field(SXVL,"7")
    field(SXST,"Camera 7")
    field(SVVL,"8")
    field(SVST,"Camera 8")
    field(EIVL,"9")
    field(EIST,"Camera 9")
    field(NIVL,"10")
    field(NIST,"Camera 10")
    field(TEVL,"11")
    field(TEST,"Camera 11")
    field(ELVL,"12")
    field(ELST,"Camera 12")
    field(TVVL,"13")
    field(TVST,"Camera 13")
    field(TTVL,"14")
    field(TTST,"Camera 14")
    field(FTVL,"15")
    field(FTST,"Camera 15")
    field(FFVL,"16")
    field(FFST,"Camera 16")
    field(FLNK,"$(P)$(R)Format2")
}

record(scalcout,"$(P)$(R)Format2") {
    field(INPA,"$(P)$(R)Mon2.RVAL NPP NMS")
    field(CALC,"$P('2Ma2Ma%d#a',A)")
    field(OUT,"$(P)$(R)Serial.AOUT PP MS")
}

record(mbbo,"$(P)$(R)Mon3") {
    field(DESC,"Monitor 3")
    field(ZRVL,"1")
    field(ZRST,"Camera 1")
    field(ONVL,"2")
    field(ONST,"Camera 2")
    field(TWVL,"3")
    field(TWST,"Camera 3")
    field(THVL,"4")
    field(THST,"Camera 4")
    field(FRVL,"5")
    field(FRST,"Camera 5")
    field(FVVL,"6")
    field(FVST,"Camera 6")
    field(SXVL,"7")
    field(SXST,"Camera 7")
    field(SVVL,"8")
    field(SVST,"Camera 8")
    field(EIVL,"9")
    field(EIST,"Camera 9")
    field(NIVL,"10")
    field(NIST,"Camera 10")
    field(TEVL,"11")
    field(TEST,"Camera 11")
    field(ELVL,"12")
    field(ELST,"Camera 12")
    field(TVVL,"13")
    field(TVST,"Camera 13")
    field(TTVL,"14")
    field(TTST,"Camera 14")
    field(FTVL,"15")
    field(FTST,"Camera 15")
    field(FFVL,"16")
    field(FFST,"Camera 16")
    field(FLNK,"$(P)$(R)Format3")
}

record(scalcout,"$(P)$(R)Format3") {
    field(INPA,"$(P)$(R)Mon3.RVAL NPP NMS")
    field(CALC,"$P('3Ma3Ma%d#a',A)")
    field(OUT,"$(P)$(R)Serial.AOUT PP MS")
}

record(mbbo,"$(P)$(R)Mon4") {
    field(DESC,"Monitor 4")
    field(ZRVL,"1")
    field(ZRST,"Camera 1")
    field(ONVL,"2")
    field(ONST,"Camera 2")
    field(TWVL,"3")
    field(TWST,"Camera 3")
    field(THVL,"4")
    field(THST,"Camera 4")
    field(FRVL,"5")
    field(FRST,"Camera 5")
    field(FVVL,"6")
    field(FVST,"Camera 6")
    field(SXVL,"7")
    field(SXST,"Camera 7")
    field(SVVL,"8")
    field(SVST,"Camera 8")
    field(EIVL,"9")
    field(EIST,"Camera 9")
    field(NIVL,"10")
    field(NIST,"Camera 10")
    field(TEVL,"11")
    field(TEST,"Camera 11")
    field(ELVL,"12")
    field(ELST,"Camera 12")
    field(TVVL,"13")
    field(TVST,"Camera 13")
    field(TTVL,"14")
    field(TTST,"Camera 14")
    field(FTVL,"15")
    field(FTST,"Camera 15")
    field(FFVL,"16")
    field(FFST,"Camera 16")
    field(FLNK,"$(P)$(R)Format4")
}

record(scalcout,"$(P)$(R)Format4") {
    field(INPA,"$(P)$(R)Mon4.RVAL NPP NMS")
    field(CALC,"$P('4Ma4Ma%d#a',A)")
    field(OUT,"$(P)$(R)Serial.AOUT PP MS")
}

record(asyn,"$(P)$(R)Serial") {
    field(PORT,"$(PORT)")
# NRRD=9 because device does not send terminator
    field(NRRD,"9")
}
