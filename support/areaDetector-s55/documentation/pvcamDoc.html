<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>areaDetector PVCAM driver</title>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type" />
</head>
<body>
  <div style="text-align: center">
    <h1>
      areaDetector PVCAM driver</h1>
    <h2>
      August 18, 2009</h2>
    <h2>
      Brian Tieman, John Hammonds, Mark Rivers</h2>
    <h2>
      Argonne National Laboratory and University of Chicago</h2>
  </div>
  <h2>
    Table of Contents</h2>
  <ul>
    <li><a href="#Introduction">Introduction</a></li>
    <li><a href="#StandardNotes">Implementation of standard driver parameters</a></li>
    <li><a href="#Driver_parameters">PVCAM specific parameters</a></li>
    <li><a href="#Unsupported">Unsupported standard driver parameters</a></li>
    <li><a href="#Configuration">Configuration</a></li>
    <li><a href="#MEDM_screens">MEDM screens</a></li>
    <li><a href="#Performance_measurements">Performance measurements</a> </li>
    <li><a href="#Restrictions">Restrictions</a> </li>
  </ul>
  <h2 id="Introduction" style="text-align: left">
    Introduction</h2>
  <p>
    This is a driver for the <a href="http://www.roperscientific.com/">Roper Scientific</a>
    detectors, which includes those from <a href="http://www.princetoninstruments.com/">
      Princeton Instruments</a> and <a href="http://www.photomet.com/">Photometrics</a>.</p>
  <p>
    The driver is based upon the PVCAM library from Roper, and only runs on Microsoft
    Windows computers. This driver is complementary to the <a href="roperDoc.html">areaDetector
      Roper driver</a>. That driver uses the Microsoft COM interface to control the
    Roper WinView program. This driver works at a lower level, communicating instead
    with the PVCAM library layer. PVCAM supports all Photometrics cameras, and many,
    but not all, Princeton Instruments cameras.
  </p>
  <p>
    ADD ADDTIONAL INTRODUCTORY TEXT HERE.</p>
  <p>
    This driver inherits from <a href="areaDetectorDoc.html#ADDriver">ADDriver</a>.
    It implements many of the parameters in NDStdDriverParam_t (see <a href="areaDetectorDoxygenHTML/asyn_n_d_array_driver_8h.html">
      asynNDArryDriver.h</a>) and in ADStdDriverParam_t (see <a href="areaDetectorDoxygenHTML/_a_d_driver_8h.html">
        ADArrayDriver.h</a>). It also implements a number of parameters that are specific
    to the Roper detectors. The <a href="areaDetectorDoxygenHTML/classpv_cam.html">pvCam
      class documentation</a> describes this class in detail.</p>
  <h2 id="StandardNotes" style="text-align: left">
    Implementation of standard driver parameters</h2>
  <p>
    The following table describes how the PVCAM driver implements some of the standard
    driver parameters.
  </p>
  <p>
    DOCUMENT IMPLEMENTATION OF STANDARD DRIVER PARAMETERS IN THIS TABLE</p>
  <table border="1" cellpadding="2" cellspacing="2" style="text-align: left">
    <tbody>
      <tr>
        <td align="center" colspan="3">
          <b>Implementation of Parameters in asynNDArrayDriver.h and ADDriver.h, and EPICS Record
            Definitions in ADBase.template and NDFile.template</b></td>
      </tr>
      <tr>
        <th>
          Parameter index variable</th>
        <th>
          EPICS record name</th>
        <th>
          Description</th>
      </tr>
      <tr>
        <td>
          ADNumImages</td>
        <td>
          $(P$(R)NumImages</td>
        <td>
          Controls the number of images to acquire when ADImageMode is ADImageMultiple.</td>
      </tr>
    </tbody>
  </table>
  <h2 id="Driver_parameters" style="text-align: left">
    PVCAM specific parameters</h2>
  <p>
    The PVCAM driver implements the following parameters in addition to those in asynNDArrayDriver.h
    and ADDriver.h. Note that to reduce the width of this table the parameter index
    variable names have been split into 2 lines, but these are just a single name, for
    example <code>PVCamInitDetector</code>.
  </p>
  <table border="1" cellpadding="2" cellspacing="2" style="text-align: left">
    <tbody>
      <tr>
        <td align="center" colspan="7">
          <b>Parameter Definitions in pvcamSrc.h and EPICS Record Definitions in pvCam.template</b></td>
      </tr>
      <tr>
        <th>
          Parameter index variable</th>
        <th>
          asyn interface</th>
        <th>
          Access</th>
        <th>
          Description</th>
        <th>
          drvInfo string</th>
        <th>
          EPICS record name</th>
        <th>
          EPICS record type</th>
      </tr>
      <tr>
        <td>
          PVCam<br />
          InitDetector</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Initializes the detector</td>
        <td>
          PVCAM_INITIALIZE_DETECTOR</td>
        <td>
          $(P)$(R)Initialize<br />
          $(P)$(R)Initialize_RBV</td>
        <td>
          longout<br />
          longin</td>
      </tr>
      <tr>
        <td>
          PVCam<br />
          InitSlot1Cam</td>
        <td>
          asynOctet</td>
        <td>
          r</td>
        <td>
         String describing 1st found detector</td>
        <td>
          PVCAM_SLOT1</td>
        <td>
          $(P)$(R)Slot1_RBV</td>
        <td>
          stringin</td>
      </tr>
      <tr>
        <td>
          PVCam<br />
          Slot2Cam</td>
        <td>
          asynOctet</td>
        <td>
          r</td>
        <td>
         String describing 2nd found detector</td>
        <td>
          PVCAM_SLOT2</td>
        <td>
          $(P)$(R)Slot2_RBV</td>
        <td>
          stringin</td>
      </tr>
      <tr>
        <td>
          PVCam<br />
          Slot3Cam</td>
        <td>
          asynOctet</td>
        <td>
          r</td>
        <td>
         String describing 3rd found detector</td>
        <td>
          PVCAM_SLOT3</td>
        <td>
          $(P)$(R)Slot3_RBV</td>
        <td>
          stringin</td>
      </tr>
      <tr>
        <td>
          PVCam<br />
          SetectorSelected</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
         Index of selected detector</td>
        <td>
          PVCAM_DETECTORSELECTED</td>
        <td>
          $(P)$(R)DetecorSelected</br>
          $(P)$(R)DetecorSelected_RBV</td>
        <td>
          longout</br>
          longin</td>
      </tr>
      <tr>
        <td>
          PVCam<br />
          ChipName</td>
        <td>
          asynOctet</td>
        <td>
          r</td>
        <td>
         String describing CCD chip</td>
        <td>
          PVCAM_CHIPNAME</td>
        <td>
          $(P)$(R)ChipName_RBV</td>
        <td>
          stringin</td>
      </tr>
      <tr>
        <td>
          PVCam<br />
          NumParallelPixels</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
         Parallel size of the CCD in active rows</td>
        <td>
          PVCAM_NUMPARALLELSIZE</td>
        <td>
          $(P)$(R)NumParallelPixels_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PVCam<br />
          NumSerialPixels</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
         Serial size of the CCD</td>
        <td>
          PVCAM_NUMSERIALSIZE</td>
        <td>
          $(P)$(R)NumSerialPixels_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PVCam<br />
          PixelParallelSize</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
         Size of the pixel in parallel direction in nanometers</td>
        <td>
          PVCAM_PIXELPARALLELSIZE</td>
        <td>
          $(P)$(R)PixelParallelSize_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PVCam<br />
          ChipHeight</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
         Height of CCD in mm</td>
        <td>
          PVCAM_CHIPHEIGHT</td>
        <td>
          $(P)$(R)ChipHeight_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PVCam<br />
          ChipWidth</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
         Width of CCD in mm</td>
        <td>
          PVCAM_CHIPWIDTH</td>
        <td>
          $(P)$(R)ChipWidth_RBV</td>
        <td>
          longin</td>
      </tr>
    </tbody>
  </table>
  <h2 id="Unsupported">
    Unsupported standard driver parameters</h2>
  <p>
    The PVCAM driver does not support the following standard driver parameters because
    they are not supported in the PVCAM library:</p>
  <ul>
    <li>List any unsupported parameters here (WORK NEEDED)</li>
  </ul>
  <h2 id="Configuration">
    Configuration</h2>
  <p>
    The PVCAM driver is created with the pvCamConfig command, either from C/C++ or from
    the EPICS IOC shell.</p>
  <pre>int pvCamConfig(const char *portName, int maxSizeX, int maxSizeY, int dataType,
                int maxBuffers, size_t maxMemory,
                int priority, int stackSize )
  </pre>
  <p>
    For details on the meaning of the parameters to this function refer to the detailed
    documentation on the pvCamConfig function in the <a href="areaDetectorDoxygenHTML/pv_cam_8cpp.html">
      pvCam.cpp documentation</a> and in the documentation for the constructor for the
    <a href="areaDetectorDoxygenHTML/classpv_cam.html">pvCam class</a>.
  </p>
  <p>
    There an example IOC boot directory and startup script (<a href="pvcam_st_cmd.html">iocBoot/iocPVCam/st.cmd)</a>
    provided with areaDetector.
  </p>
  <h2 id="MEDM_screens" style="text-align: left">
    MEDM screens</h2>
  <p>
    The following shows the MEDM screens that are used to control the PVCAM detector.
    Note that the general purpose screen ADBase.adl can be used, but it exposes many
    controls that are not applicable to the PVCAM driver, and lacks some fields that
    are important for the PVCAM driver.</p>
  <p>
    <code>pvCam.adl</code> is the main screen used to control the PVCAM driver.
  </p>
  <div style="text-align: center">
    <h3 style="text-align: center">
      pvCam.adl</h3>
    <img alt="pvCam.png" src="pvCam.png" /></div>
  <h2 id="Performance_measurements">
    Performance measurements</h2>
  <p>
    The following measurements were done to demonstrate the performance that can be
    obtained with the areaDetector PVCAM driver.</p>
  <p>
    PUT A TABLE OF PERFORMANCE MEASUREMENTS HERE</p>
  <h2 id="Restrictions">
    Restrictions</h2>
  <p>
    The following are some current restrictions of the PVCAM driver:</p>
  <ul>
    <li>DOCUMENT ANY IMPORTANT RESTRICTIONS OF THE PVCAM DRIVER HERE</li>
  </ul>
</body>
</html>
