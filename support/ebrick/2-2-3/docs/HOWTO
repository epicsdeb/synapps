
                          Argonne National Laboratory
                            APS Operations Division
                     Beamline Controls and Data Acquisition

                          EPICS Brick Support (eBrick)
             Diamond Systems Corporation Athena Single Board Computer
-------------------------------------------------------------------------------
1. Make SSH paswordless
   - Link with some info:
     http://rcsg-gsir.imsb-dsgi.nrc-cnrc.gc.ca/documents/internet/node31.html
   - Use the follow commands:
     1. ssh-keygen -t rsa
     2. copy the result .pub file to your home directory on the machine you will
        be loggin into, and rename it to authorized_keys.
   - Use 'ssh -l username <ip addr>' without requiring a password.
   - If this is for CVS, remember to modify the Root files accordingly.
-------------------------------------------------------------------------------
2. Create an IOC brick from the development brick:
   NOTE:
      - There are two accounts on the eBrick. A root account (named root) for
        managing the system, and an epicsioc account for developing EPICS
        applications and to execute the EPICS application when operating as
        an IOC.
   1. Make a disk image of from development system,
      - Power down and connect a slave drive to the IDE cable,
      - Login as root and execute the command:
        dd if=/dev/hda of=/dev/hdb bs=1k
      - Logout and power down, make the slave disk the master (remove jumper),
   2. Modify the disk for the new system (development or IOC),
      - Change to the home directory of the IOC account (cd /home/epicsioc),
      - Modify the start_ioc and start_medm scripts to reference the correct
        executeables and directories.
      - Copy the software from the appropriate epicsioc account IOC directory,
   4. Modify the password for root,
   5. Modify the network name,
   6. Configure the desired default boot mode (linux-dev,linux-ioc-con,linux-ioc-wdm,
      linux-ioc-ser),
   7. Test booting into console, wdm, and serial modes,
      ***Note that serial mode requires that the IOC not access the serial port
      that is being used as the console. The IOC out of the box is preconfigured
      to use /dev/ttyS0. The default port settings are 9600 8-N-1 VT100. This can
      be connected to a PC running Hyperterm or a Linux box running minicom. However,
      if a different serial port must be used, then make sure that asyn.cmd does not
      use ttyS0 and that lilo.conf, login.defs, and inittab use same device (ttyS0),
      as well as rc.serial contains the correct baud rate and device. In addition,
      the Athena BIOS can be configured to redirect console output, 
-------------------------------------------------------------------------------
3. Configure for GPIB
    1. In iocBoot/iocyyy directory, uncomment lines with GPIB initialization
       and associated Asyn records.
    2. In yyyApp/src/Macfile, uncomment line 'USR_SYS_LIBS += gpib'
    3. In yyyApp/src/yyySupport.dbd, uncomment line 'include drvLinuxGpib.dbd'
    4. Rebuild application.

-------------------------------------------------------------------------------
Contact information:
Argonne National Laboratory
APS Operations Division
Beamline Controls and Data Acquisition
David Kline
dkline@aps.anl.gov
-------------------------------------------------------------------------------
